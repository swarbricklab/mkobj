# mkobj Configuration Template
# Edit this file according to your dataset structure

# Dependencies
deps:
  # Path to filtered feature barcode matrices from Cell Ranger
  # Each capture should be a subdirectory containing barcodes.tsv.gz, features.tsv.gz, matrix.mtx.gz
  cellranger: "data/counts"
  
  # CSV file listing captures to process (requires 'capture' column)
  captures: "config/mkobj/captures.csv"
  
  # [Optional] CSV file for subsetting cells by sample
  # Must have 'sample_id' and 'capture_id' columns. For each capture, only cells
  # assigned to sample_ids listed for that capture will be kept.
  # Doublets and unassigned cells are always retained.
  # samples: "samples.csv"
  
  # [Optional] Path to sample assignment files from SNP demux
  # Each capture should have {capture}/cell_assignment.tsv
  demux: "data/demux"
  
  # [Optional] Path to cell type annotation files
  # Each capture should have {capture}/cell_types.csv  
  annotation: "data/annotations"
  
  # [Optional] Path to ambient RNA profile files
  # Each capture should have {capture}/ambient_summary.csv
  ambient: "data/ambient"

# Outputs
outs:
  results: "data/objects"
  logs: "logs/mkobj"

# Parameters
params:
  # Modality handling for multimodal data:
  # - "auto": detect automatically (default)
  # - "Gene Expression": use gene expression only
  modality: "auto"

# ── Subsets (optional) ─────────────────────────────────────────────────────────
# Define named subsets to produce multiple merged objects in a single run.
# Each subset gets its own output directory: {outs.results}/{subset_name}/
# If omitted, a single merged object is produced at {outs.results}/.
#
# Each subset can optionally specify:
#   captures: path to a subset-specific captures CSV (overrides deps.captures)
#   samples:  path to a samples CSV for cell-level filtering
#
# subsets:
#   all:
#     samples: "config/mkobj/samples_all.csv"
#   cohort_a:
#     captures: "config/mkobj/captures_cohort_a.csv"
#     samples: "config/mkobj/samples_cohort_a.csv"
#   cohort_b:
#     samples: "config/mkobj/samples_cohort_b.csv"
